!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.TrackingSDK=t():e.TrackingSDK=t()}(this,()=>(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{initTrackingSDK:()=>s,trackEvent:()=>p,unloadTrackingSDK:()=>u});var n=[],o=null,i=5,a=3e3;function r(){if(0!==n.length){var e=n.splice(0,i);fetch("https://your-backend-api.com/track",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).catch(function(e){console.error("数据上报失败:",e)}),o&&(clearTimeout(o),o=null)}}function c(e){n.push(e),n.length>=i?r():o||(o=window.setTimeout(r,a))}var l=null,d=null;function s(){l||(l=function(e){function t(t){var n,o=t.target;if(o){var i={eventType:"click",timestamp:Date.now(),pageUrl:window.location.href,elementId:o.id||null,elementType:o.tagName.toLowerCase(),extraData:{classList:Array.from(o.classList),text:(null===(n=o.innerText)||void 0===n?void 0:n.slice(0,100))||""}};e(i)}}return document.addEventListener("click",t,!0),function(){document.removeEventListener("click",t,!0)}}(c)),d||(d=function(e){function t(){e({eventType:"pageview",timestamp:Date.now(),pageUrl:window.location.href})}window.addEventListener("load",t);var n=history.pushState,o=history.replaceState;return history.pushState=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n.apply(this,e),window.dispatchEvent(new Event("locationchange"))},history.replaceState=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.apply(this,e),window.dispatchEvent(new Event("locationchange"))},window.addEventListener("popstate",function(){window.dispatchEvent(new Event("locationchange"))}),window.addEventListener("locationchange",t),function(){window.removeEventListener("load",t),window.removeEventListener("popstate",function(){return window.dispatchEvent(new Event("locationchange"))}),window.removeEventListener("locationchange",t)}}(c))}function p(e,t){void 0===t&&(t={}),c({eventType:e,timestamp:Date.now(),pageUrl:window.location.href,extraData:t})}function u(){l&&(l(),l=null),d&&(d(),d=null)}return window.TrackingSDK={initTrackingSDK:s,trackEvent:p,unloadTrackingSDK:u},t})());